<div *ngIf="!isLoaded" class="flex justify-center items-center h-64">
  <div class="text-[#771020] text-2xl font-bold animate-pulse">Chargement...</div>
</div>

<div *ngIf="isLoaded">
<section class="bg-[#ede6ce] px-10 py-16">

  <div class="rounded-xl bg-white shadow-md border border-[#771020] p-10 max-w-4xl mx-auto">
    <div class="mx-auto mb-12 max-w-2xl text-center">
      <h1 class="mb-4 text-3xl font-bold text-[#771020]">Modifier les informations du client</h1>
      <p class="text-lg text-[#771020]">Veuillez remplir les champs ci-dessous pour mettre à jour les informations du client.</p>
    </div>
    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="grid grid-cols-2 gap-6">
      <div>
        <label for="nom_client" class="block text-[#771020] font-medium mb-2">Nom*</label>
        <input id="nom_client" formControlName="nom_client" placeholder="Nom" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#f1b939]" />
        <p [hidden]="!form.get('nom_client')?.errors?.['required'] || !form.get('nom_client')?.touched" class="text-sm text-red-600 mt-1">
          Le nom est requis.
        </p>
      </div>
      <div>
        <label for="prenom_client" class="block text-[#771020] font-medium mb-2">Prénom*</label>
        <input id="prenom_client" formControlName="prenom_client" placeholder="Prénom" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#f1b939]" />
        <p [hidden]="!form.get('prenom_client')?.errors?.['required'] || !form.get('prenom_client')?.touched" class="text-sm text-red-600 mt-1">
          Le prénom est requis.
        </p>
      </div>
      <div>
        <label for="email_client" class="block text-[#771020] font-medium mb-2">Adresse e-mail*</label>
        <input id="email_client" type="email" formControlName="email_client" required class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#f1b939]" placeholder="ex: nom@exemple.com" />
        <p [hidden]="!form.get('email_client')?.errors?.['required'] || !form.get('email_client')?.touched" class="text-sm text-red-600 mt-1">
          L'adresse e-mail est requise.
        </p>
        <p [hidden]="!form.get('email_client')?.errors?.['pattern'] || !form.get('email_client')?.touched" class="text-sm text-red-600 mt-1">
          L'adresse e-mail doit être valide (ex : nom&#64;exemple.com).
        </p>
      </div>
      <div>
        <label for="tel_client" class="block text-[#771020] font-medium mb-2">Téléphone*</label>
        <input id="tel_client" formControlName="tel_client" placeholder="Téléphone" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#f1b939]" />
        <p [hidden]="!form.get('tel_client')?.errors?.['required'] || !form.get('tel_client')?.touched" class="text-sm text-red-600 mt-1">
          Le numéro de téléphone est requis.
        </p>
        <p [hidden]="!form.get('tel_client')?.errors?.['pattern'] || !form.get('tel_client')?.touched" class="text-sm text-red-600 mt-1">
          Le numéro de téléphone doit contenir exactement 10 chiffres.
        </p>
      </div>
      <div>
        <label for="nom_rue_client" class="block text-[#771020] font-medium mb-2">Nom de rue*</label>
        <input id="nom_rue_client" formControlName="nom_rue_client" placeholder="Nom de rue" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#f1b939]" />
        <p [hidden]="!form.get('nom_rue_client')?.errors?.['required'] || !form.get('nom_rue_client')?.touched" class="text-sm text-red-600 mt-1">
          Le nom de rue est requis.
        </p>
      </div>
      <div>
        <label for="num_rue_client" class="block text-[#771020] font-medium mb-2">Numéro de rue*</label>
        <input id="num_rue_client" formControlName="num_rue_client" placeholder="Numéro de rue" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#f1b939]" />
        <p [hidden]="!form.get('num_rue_client')?.errors?.['required'] || !form.get('num_rue_client')?.touched" class="text-sm text-red-600 mt-1">
          Le numéro de rue est requis.
        </p>
      </div>
      <div>
        <label for="code_postal_client" class="block text-[#771020] font-medium mb-2">Code postal*</label>
        <input id="code_postal_client" formControlName="code_postal_client" placeholder="Code postal" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#f1b939]" />
        <p [hidden]="!form.get('code_postal_client')?.errors?.['required'] || !form.get('code_postal_client')?.touched" class="text-sm text-red-600 mt-1">
          Le code postal est requis.
        </p>
      </div>
      <div>
        <label class="block mb-1 font-medium text-[#771020]">Pays*</label>
        <input type="text" list="paysList" formControlName="pays_client" required class="w-full px-4 py-2 mt-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#f1b939]" placeholder="Pays" />
        <datalist id="paysList" #paysList></datalist>
        <p [hidden]="!form.get('pays_client')?.errors?.['required'] || !form.get('pays_client')?.touched" class="text-sm text-red-600 mt-1">
          Le pays est requis.
        </p>
        <p [hidden]="!form.get('pays_client')?.errors?.['invalidCountry'] || !form.get('pays_client')?.touched" class="text-sm text-red-600 mt-1">
          Le pays que vous avez entré est invalide. Veuillez en choisir un dans la liste.
        </p>
      </div>

      <button type="submit" (click)="onNextStep(form)" class="col-span-2 rounded border-2 border-[#771020] bg-[#f1b939] px-4 py-2 font-semibold text-[#771020] transition hover:bg-[#fff0c2] cursor-pointer">
        Enregistrer
      </button>
    </form>
  </div>
</section>
</div>
